<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fancy Weather App</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      transition: background 1s ease;
      color: white;
    }
    body.day {
      background: linear-gradient(to bottom, #87ceeb, #f0f8ff);
    }
    body.night {
      background: linear-gradient(to bottom, #2c3e50, #4b79a1);
    }
    body.sunrise {
      background: linear-gradient(to bottom, #ff9a9e, #fad0c4);
    }
    body.sunset {
      background: linear-gradient(to bottom, #ff7e5f, #feb47b);
    }
    .app {
      max-width: 900px;
      margin: auto;
      padding: 20px;
      text-align: center;
    }
    .search-box {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .search-box input {
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
    }
    .search-box button {
      padding: 10px 16px;
      background: rgba(255, 255, 255, 0.3);
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      color: white;
    }
    .error {
      color: yellow;
      margin-bottom: 10px;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
    }
    .weather-card {
      width: 150px;
      background: rgba(255,255,255,0.15);
      border-radius: 20px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 8px 15px rgba(0,0,0,0.3);
      transition: transform 0.3s ease;
    }
    .weather-card:hover {
      transform: translateY(-5px);
    }
    .weather-card img {
      width: 60px;
    }
    .temp {
      font-size: 32px;
      font-weight: bold;
    }
    .date {
      font-size: 16px;
      margin-top: 5px;
    }
  </style>
</head>
<body class="day">
  <div class="app">
    <div class="search-box">
      <input type="text" id="zipInput" placeholder="Enter ZIP code">
      <button id="searchBtn">Get Weather</button>
    </div>
    <div id="error" class="error"></div>
    <h1 id="location"></h1>
    <div class="cards" id="forecast"></div>
  </div>
  
  <script>
    const apiKey = "1641bc3200a14ddfa8645938250908 "; // Replace with your WeatherAPI key
    const searchBtn = document.getElementById("searchBtn");
    const zipInput = document.getElementById("zipInput");
    const forecastDiv = document.getElementById("forecast");
    const locationTitle = document.getElementById("location");
    const errorDiv = document.getElementById("error");

    searchBtn.addEventListener("click", () => {
      const zip = zipInput.value.trim();
      if (!zip) {
        errorDiv.textContent = "Please enter a ZIP code.";
        return;
      }
      fetchWeather(zip);
    });

    async function fetchWeather(zip) {
      errorDiv.textContent = "";
      forecastDiv.innerHTML = "";
      try {
        const res = await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${zip}&days=7&aqi=no&alerts=no`);
        if (!res.ok) throw new Error("Invalid ZIP or API error");
        const data = await res.json();
        
        locationTitle.textContent = `${data.location.name}, ${data.location.region}`;
        setTimeOfDay(data.location.localtime);

        data.forecast.forecastday.forEach(day => {
          const card = document.createElement("div");
          card.className = "weather-card";
          card.innerHTML = `
            <img src="https:${day.day.condition.icon}" alt="${day.day.condition.text}" />
            <div class="temp">${Math.round(day.day.avgtemp_f)}°F</div>
            <div class="condition">${day.day.condition.text}</div>
            <div class="date">${new Date(day.date).toLocaleDateString('en-US', { weekday: 'long' })}</div>
            <div class="minmax">${Math.round(day.day.mintemp_f)}° / ${Math.round(day.day.maxtemp_f)}°</div>
          `;
          forecastDiv.appendChild(card);
        });
      } catch (err) {
        errorDiv.textContent = err.message;
      }
    }

    function setTimeOfDay(localTime) {
      const hour = parseInt(localTime.split(" ")[1].split(":")[0]);
      let timeClass = "day";
      if (hour >= 20 || hour < 5) timeClass = "night";
      else if (hour >= 5 && hour < 8) timeClass = "sunrise";
      else if (hour >= 18 && hour < 20) timeClass = "sunset";
      document.body.className = timeClass;
    }
  </script>
</body>
</html>
