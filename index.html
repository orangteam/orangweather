<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fancy Weather</title>
<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color: white;
    transition: background 1s ease;
    background-size: cover;
    background-attachment: fixed;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  body.day {
    background: linear-gradient(to bottom, #87ceeb, #f0f8ff);
  }
  body.night {
    background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
  }
  body.sunrise {
    background: linear-gradient(to bottom, #ff9a9e, #fad0c4);
  }
  body.sunset {
    background: linear-gradient(to bottom, #ff7e5f, #feb47b);
  }

  .search-box {
    display: flex;
    gap: 10px;
    margin: 20px 0;
  }
  .search-box input {
    padding: 10px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
  }
  .search-box button {
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    background: rgba(255, 255, 255, 0.3);
    color: white;
    cursor: pointer;
    font-size: 16px;
  }

  .current-weather {
    text-align: center;
    margin-top: 10px;
  }
  .current-temp {
    font-size: 80px;
    font-weight: 300;
  }
  .current-condition {
    font-size: 22px;
    opacity: 0.9;
  }
  .current-icon {
    width: 120px;
  }

  .details {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 15px;
    background: rgba(255,255,255,0.15);
    padding: 10px 20px;
    border-radius: 20px;
    backdrop-filter: blur(8px);
  }
  .detail {
    text-align: center;
    font-size: 14px;
  }
  .detail-value {
    font-size: 18px;
    font-weight: bold;
  }

  .forecast {
    margin-top: 30px;
    display: flex;
    overflow-x: auto;
    gap: 15px;
    padding: 10px;
    scrollbar-width: none;
  }
  .forecast::-webkit-scrollbar {
    display: none;
  }
  .day-card {
    flex: 0 0 auto;
    background: rgba(255,255,255,0.15);
    border-radius: 15px;
    padding: 10px;
    text-align: center;
    backdrop-filter: blur(8px);
    min-width: 90px;
  }
  .day-card img {
    width: 50px;
  }
  .day-name {
    font-weight: bold;
    margin-bottom: 5px;
  }
  .day-temp {
    font-size: 16px;
  }

  .error {
    color: yellow;
    margin-top: 5px;
  }
</style>
</head>
<body class="day">
  <div class="search-box">
    <input type="text" id="zipInput" placeholder="Enter ZIP code">
    <button id="searchBtn">Get Weather</button>
  </div>
  <div id="error" class="error"></div>

  <div class="current-weather">
    <img id="currentIcon" class="current-icon" src="" alt="">
    <div id="currentTemp" class="current-temp"></div>
    <div id="currentCondition" class="current-condition"></div>
  </div>

  <div class="details">
    <div class="detail">
      <div>Feels Like</div>
      <div id="feelsLike" class="detail-value"></div>
    </div>
    <div class="detail">
      <div>Wind</div>
      <div id="wind" class="detail-value"></div>
    </div>
    <div class="detail">
      <div>Humidity</div>
      <div id="humidity" class="detail-value"></div>
    </div>
  </div>

  <div class="forecast" id="forecast"></div>

  <script>
    const apiKey = "1641bc3200a14ddfa8645938250908 "; // Replace with WeatherAPI key
    const searchBtn = document.getElementById("searchBtn");
    const zipInput = document.getElementById("zipInput");
    const errorDiv = document.getElementById("error");

    searchBtn.addEventListener("click", () => {
      const zip = zipInput.value.trim();
      if (!zip) {
        errorDiv.textContent = "Please enter a ZIP code.";
        return;
      }
      fetchWeather(zip);
    });

    async function fetchWeather(zip) {
      errorDiv.textContent = "";
      try {
        const res = await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${zip}&days=7&aqi=no&alerts=no`);
        if (!res.ok) throw new Error("Invalid ZIP or API error");
        const data = await res.json();
        updateCurrent(data);
        updateForecast(data.forecast.forecastday);
        setTimeOfDay(data.location.localtime);
      } catch (err) {
        errorDiv.textContent = err.message;
      }
    }

    function updateCurrent(data) {
      document.getElementById("currentIcon").src = "https:" + data.current.condition.icon;
      document.getElementById("currentTemp").textContent = Math.round(data.current.temp_f) + "째F";
      document.getElementById("currentCondition").textContent = data.current.condition.text;
      document.getElementById("feelsLike").textContent = Math.round(data.current.feelslike_f) + "째F";
      document.getElementById("wind").textContent = data.current.wind_mph + " mph";
      document.getElementById("humidity").textContent = data.current.humidity + "%";
    }

    function updateForecast(days) {
      const forecastDiv = document.getElementById("forecast");
      forecastDiv.innerHTML = "";
      days.forEach(day => {
        const card = document.createElement("div");
        card.className = "day-card";
        card.innerHTML = `
          <div class="day-name">${new Date(day.date).toLocaleDateString('en-US', { weekday: 'short' })}</div>
          <img src="https:${day.day.condition.icon}" alt="${day.day.condition.text}" />
          <div class="day-temp">${Math.round(day.day.mintemp_f)}째 / ${Math.round(day.day.maxtemp_f)}째</div>
        `;
        forecastDiv.appendChild(card);
      });
    }

    function setTimeOfDay(localTime) {
      const hour = parseInt(localTime.split(" ")[1].split(":")[0]);
      let timeClass = "day";
      if (hour >= 20 || hour < 5) timeClass = "night";
      else if (hour >= 5 && hour < 8) timeClass = "sunrise";
      else if (hour >= 18 && hour < 20) timeClass = "sunset";
      document.body.className = timeClass;
    }
  </script>
</body>
</html>
